---
title: services.users
description: 当システムのユーザー管理に関するビジネスロジックを提供する。
---

## get_group_ids_from_eppn
ePPN から所属グループを取得する

#### 引数
| 名前 | 型  | 説明                    |
| ---- | --- | ----------------------- |
| eppn | str | ログインユーザーの ePPN |

#### 戻り値
| 型         | 説明          |
| ---------- | ------------- |
| list\[str] | 所属 group_id |

#### 処理方法
1. [`get_by_eppn`] でユーザー情報を取得する
2. 戻り値が None の場合 ResourceNotFound を送出する
3. [`UserDetail`](../03.entities/10.user-detail.md#userdetail) オブジェクトの場合 UserDetail.groups の各要素の value のリストを戻り値として返す

## get_user_name_from_eppn
ePPN からユーザー名を取得する

#### 引数
| 名前 | 型  | 説明                    |
| ---- | --- | ----------------------- |
| eppn | str | ログインユーザーの ePPN |

#### 戻り値
| 型  | 説明       |
| --- | ---------- |
| str | ユーザー名 |

#### 処理方法
1. [`get_by_eppn`] でユーザー情報を取得する
2. 戻り値が None の場合 ResourceNotFound を送出する
3. [`UserDetail`](../03.entities/10.user-detail.md#userdetail) オブジェクトの場合 UserDetail.user_name を戻り値として返す


## get_filter_options
ユーザー一覧のフィルター選択肢を取得する

#### シグネチャ
```python[users.py]
def get_filter_options() -> FilterOption:
```

#### 戻り値

| 型           | 説明                           |
| ------------ | ------------------------------ |
| FilterOption | ユーザーのフィルターオプション |

#### 処理方法
1. [`get_login_user_roles`](../05.services/08.permissions.md#get_login_user_roles) で管理対象のリポジトリ ID を取得
2. services.groups:search でリポジトリ ID を含むグループを検索し ID をリスト化
3. FilterOption を作成し返却する
