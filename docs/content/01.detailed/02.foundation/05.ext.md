---
title: ext
description: Flask アプリケーションの拡張機能を提供する。
---

## JAIROCloudGroupsManager
当機能の全体的な初期化処理を行い、Flask 拡張として登録するクラス。

#### シグネチャ
```python[ext.py]
class JAIROCloudGroupsManager:
```

#### 属性

| 名前   | 型                                                 | 説明                                                       |
| ------ | -------------------------------------------------- | ---------------------------------------------------------- |
| config | str \| [RuntimeConfig](02.config.md#runtimeconfig) | サーバー設定のファイルパス、またはサーバー設定インスタンス |

#### メソッド

| 名前                       | 型   | 説明                                       |
| -------------------------- | ---- | ------------------------------------------ |
| &#95;&#95;init&#95;&#95;() | None | クラスの初期化メソッド                     |
| init_app()                 | None | Flask アプリケーションを初期化するメソッド |
| init_config()              | None | サーバー設定値を初期化するメソッド         |
| init_db_app()              | None | データベースを初期化するメソッド           |


### \_\_init__
クラスの初期化メソッド。

#### シグネチャ
```python[ext.py]
def __init__(self, app: Flask = None, config: str | RuntimeConfig = None) -> None:
```

#### 引数

| 名前   | 型                                                 | デフォルト | 説明                                           |
| ------ | -------------------------------------------------- | ---------- | ---------------------------------------------- |
| app    | Flask                                              | None       | Flask アプリケーションインスタンス             |
| config | str \| [RuntimeConfig](02.config.md#runtimeconfig) | None       | サーバー設定値のインポート名またはオブジェクト |

#### 処理内容
1. 属性 `config` に引数 `config` の値を設定する。
   引数の指定がなければ、[`DEFAULT_CONFIG_PATH`](./03.const.md#default_config_path) を設定する。
2. 引数 `app` が指定されている場合、[`init_app`](#init_app) メソッドを呼び出す。


### init_app
Flask 拡張として初期化を行うメソッド。

#### シグネチャ
```python[ext.py]
def init_app(self, app: Flask) -> None:
```

#### 引数

| 名前 | 型    | 説明                               |
| ---- | ----- | ---------------------------------- |
| app  | Flask | Flask アプリケーションインスタンス |

#### 処理内容
1. [`init_config`](#init_config) メソッドを呼び出し、サーバー設定値を初期化する。
2. [`init_db_app`](#init_db_app) メソッドを呼び出し、データベースを初期化する。
3. アプリケーションのロガーの設定を行う。
4. API のルーティングを登録する。
5. 自身を Flask 拡張として `"jairocloud-groups-manager"` の名前で登録する。


### init_config
サーバー設定値を初期化するメソッド。

#### シグネチャ
```python[ext.py]
def init_config(self, app: Flask) -> None:
```

#### 引数

| 名前 | 型    | 説明                               |
| ---- | ----- | ---------------------------------- |
| app  | Flask | Flask アプリケーションインスタンス |

#### 処理内容
1. 属性 `config` の値で [`config:setup_config`](02.config.md#setup_config) 関数を呼び出し、
  サーバー設定値を初期化する。
1. 引数 `app` の設定オブジェクトにサーバー設定値を登録する。
2. 引数 `app` の設定オブジェクトに環境変数を読み込ませる。


### init_db_app
データベースに関する初期化を行うメソッド。

#### シグネチャ
```python[ext.py]
def init_db_app(self, app: Flask) -> None:
```

#### 引数

| 名前 | 型    | 説明                               |
| ---- | ----- | ---------------------------------- |
| app  | Flask | Flask アプリケーションインスタンス |

#### 依存するライブラリ
- **Flask-SQLAlchemy**： データベース拡張機能の初期化に使用。

#### 処理内容
1. データベース拡張機能を初期化する。
2. テーブルに対応するモデルクラスをインポートし、読み込ませる。
