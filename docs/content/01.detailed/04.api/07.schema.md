---
title: api.schema
description: API のリクエストおよびレスポンスで使用されるスキーマモデルを提供する。
---

## OAuthTokenQuery
OAuth 2.0 の認可コードを受け取るためのクエリパラメータモデル。

#### シグネチャ
```python[callback.py]
class OAuthTokenQuery(BaseModel):
```

#### 依存するライブラリ
- **Pydantic**： モデル定義および JSON シリアライズ・デシリアライズに使用。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前         | 型                  | 説明                  |
| ------------ | ------------------- | --------------------- |
| code         | str                 | 認可コード            |
| state        | str                 | 状態パラメータ        |
| model_config | pydantic.ConfigDict | Pydantic モデルの設定 |


## RepositoriesQuery
リポジトリ検索クエリを表すモデルクラス。

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前 | 型                      | 説明               |
| ---- | ----------------------- | ------------------ |
| q    | str                     | 検索キーワード     |
| k    | str                     | ソートキー         |
| d    | Literal\["asc", "desc"] | 並び順             |
| p    | int                     | ページ番号         |
| l    | int                     | 1 ページの表示件数 |

## GroupsQuery
グループ検索クエリを表すモデルクラス。

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前 | 型                      | 説明                        |
| ---- | ----------------------- | --------------------------- |
| q    | str                     | 検索キーワード              |
| r    | list\[str]              | フィルターするリポジトリ ID |
| u    | list\[str]              | フィルターするユーザー ID   |
| s    | Literal\[0,1]           | 公開，非公開                |
| v    | Literal\[0,1,2]         | メンバー公開設定            |
| k    | str                     | ソートキー                  |
| d    | Literal\["asc", "desc"] | 並び順                      |
| p    | int                     | ページ番号                  |
| l    | int                     | 1 ページの表示件数          |

#### 備考
クラス属性 `s` の各値は以下の通りに対応する
| 値  | 説明    |
| --- | ------- |
| 0   | public  |
| 1   | private |

クラス属性 `v` の各値は以下の通りに対応する
| 値  | 説明    |
| --- | ------- |
| 0   | public  |
| 1   | private |
| 2   | hidden  |

## UsersQuery
ユーザー検索クエリを表すモデルクラス。

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前 | 型                      | 説明                        |
| ---- | ----------------------- | --------------------------- |
| q    | str                     | 検索キーワード              |
| r    | list\[str]              | フィルターするリポジトリ ID |
| g    | list\[str]              | フィルターするグループ ID   |
| a    | list\[int]              | フィルターするロール        |
| s    | date                    | 最終更新日時範囲の開始日    |
| e    | date                    | 最終更新日時範囲の終了日    |
| k    | str                     | ソートキー                  |
| d    | Literal\["asc", "desc"] | 並び順                      |
| p    | int                     | ページ番号                  |
| l    | int                     | 1 ページの表示件数          |

#### 備考
クラス属性 `a` の各値は以下の通りに対応する
| 値  | 説明             |
| --- | ---------------- |
| 0   | system admin     |
| 1   | repository admin |
| 2   | community admin  |
| 3   | contributor      |
| 4   | general user     |

## TagetRepository
アップロード対象のリポジトリを表すモデルクラス。

#### シグネチャ
```python[bulk.py]
class TagetRepository(pydantic.BaseModel):
```

#### 依存するライブラリ
- **Pydantic**： モデル定義および JSON シリアライズ・デシリアライズに使用。

#### 継承元
- `pydantic.BaseModel`

#### クラス属性
| 名前          | 型                  | 説明                  |
| ------------- | ------------------- | --------------------- |
| repository_id | str                 | 操作するリポジトリ ID |
| model_config  | pydantic.ConfigDict | Pydantic モデルの設定 |

## UploadFiles
`multipart/form-data` でアップロードされたファイル群を格納し、 View 関数内で型安全に扱うためのデータクラス。

#### シグネチャ
```python[bulk.py]
class UploadFiles(pydantic.BaseModel):
```

#### 依存するライブラリ
- **Pydantic**： モデル定義および JSON シリアライズ・デシリアライズに使用。

#### 継承元
- `pydantic.BaseModel`

#### クラス属性
| 名前         | 型                  | 説明                  |
| ------------ | ------------------- | --------------------- |
| bulk_file    | FileStorage \| None | アップロードファイル  |
| model_config | pydantic.ConfigDict | Pydantic モデルの設定 |

#### 備考
`model_config` に `arbitrary_types_allowed=True`を設定する必要がある

## BulkBody

#### シグネチャ
```python[bulk.py]
class BulkBody(pydantic.BaseModel):
```

#### 依存するライブラリ
- **Pydantic**： モデル定義および JSON シリアライズ・デシリアライズに使用。

#### クラス属性
| 名前         | 型                | 説明             |
| ------------ | ----------------- | ---------------- |
| temporary_id | uuid.UUID \| None | ファイル ID      |
| history_id   | uuid.UUID \| None | 履歴 ID          |
| task_id      | str \| None       | タスク ID        |
| status       | str \| None       | タスクステータス |

## UploadBody

#### シグネチャ
```python[bulk.py]
class UploadBody(pydantic.BaseModel):
```

#### 依存するライブラリ
- **Pydantic**： モデル定義および JSON シリアライズ・デシリアライズに使用。

#### クラス属性
| 名前          | 型                | 説明                                             |
| ------------- | ----------------- | ------------------------------------------------ |
| task_id       | str               | バリデーションタスクの ID                        |
| repository_id | str               | 選択されたリポジトリの ID                        |
| temporary_id  | uuid.UUID         | 仮アップロードされたファイルの識別子             |
| delete_users  | list\[UserDetail] | リポジトリ内のグループから除外するユーザーの情報 |


## UploadQuery
アップロード結果の検索クエリを表すモデルクラス。

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前 | 型         | 説明               |
| ---- | ---------- | ------------------ |
| f    | list\[int] | 絞り込むステータス |
| p    | int        | ページ番号         |
| l    | int        | 1 ページの表示件数 |

#### 備考
クラス属性 `f` の各値は以下の通りに対応する
| 値  | 説明    |
| --- | ------- |
| 0   | success |
| 1   | update  |
| 2   | delete  |
| 3   | skip    |
| 4   | error   |

## GroupPatchRequest
グループメンバー変更時のリクエストボディ

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前  | 型                       | 説明                 |
| ----- | ------------------------ | -------------------- |
| op    | Literal\["add","remove"] | 操作タイプ名         |
| path  | str                      | 操作対象のフィールド |
| value | list\[str]               | 操作で使用する値     |

## DeleteGroupRequest
複数グループ削除のリクエストボディ

#### 依存するライブラリ
- **Pydantic**: モデルクラスを定義するために使用する。

#### 継承元
`pydantic.BaseModel`

#### クラス属性

| 名前      | 型        | 説明                         |
| --------- | --------- | ---------------------------- |
| group_ids | set\[str] | 削除するグループ ID のセット |
